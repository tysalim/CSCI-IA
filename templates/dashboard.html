{% extends 'base.html' %}
{% block title %}Dashboard â€¢ PriceTrak{% endblock %}
{% block content %}
  <h3 class="fw-bold">Dashboard</h3>
  <p class="text-muted">Paste a product URL to start tracking.</p>
  <form action="/track" method="POST" class="mt-3">
    <div class="input-group mb-3">
      <input type="url" class="form-control" name="url" placeholder="Enter product URL" required>
      <button class="btn btn-primary" type="submit">Track</button>
    </div>
  </form>
  <hr />
  <h5 class="mt-4">Recently viewed products</h5>
  {% if not visits %}
    <p class="text-muted">No recent views yet. View products to populate this list.</p>
  {% else %}
    <div class="table-responsive">
      <table class="table table-sm table-striped align-middle">
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>When</th>
          </tr>
        </thead>
        <tbody>
          {% for v in visits %}
            <tr>
              <td><a href="{{ v.url }}">{{ v.name }}</a></td>
              <td>{{ v.currency or '' }} {{ '%.2f'|format(v.price or 0) }}</td>
              <td>{{ v.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
{% endblock %}


